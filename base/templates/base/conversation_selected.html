<!-- base/templates/base/conversation_selected.html -->

{% extends 'main.html' %}

{% load static i18n %}

{% block title %}
    - {% trans "Conversations Detailed Template" %}
{% endblock %}

{% block favicon %}
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon7.ico' %}">
{% endblock %}

{% block content1 %}
<div class="container-fluid">
    <div class="p-3 rounded-3 jumbotron text-light">
        <div class="container-fluid p-1">
            <h1 class="">
                <img src="{% static 'images/crown.webp' %}" alt="Crown Icon" 
                class="crown img-fluid mx-auto" width="100" height="100">
                {% trans "Conversation" %} ðŸ”¥{{ conversation_id }}ðŸ”¥
                <img src="{% static 'images/crown.webp' %}" alt="Crown Icon" 
                class="crown img-fluid mx-auto" width="100" height="100">
            </h1>
        </div>
    </div>
</div>
{% endblock %}


{% block content %}

<main>
    <div class="container-fluid">
        <div class="text-center">
            <div class="p-3 rounded-3 jumbotron bg-dark text-light my-4">
                <div class="py-1">
                    <h1 class="text-center">-Â¡!Â¡- {% trans "Conversation Detailed" %} -Â¡!Â¡-</h1>
                </div>
            </div>

            <hr class="green mb-3">
            <h3 class="conversations">{% trans "Conversation Details" %}</h3>
            <hr class="green mb-5">
            <hr class="gold mb-4">

            <div class="container-fluid main mb-4 p-3 border align-left rounded shadow-sm">
                <div class="row mb-3">
                    <div class="col-md-12">
                        <div class="d-flex justify-content-between">
                            <div class="conversation_id">
                                <strong>{% trans "Conversation ID:" %}</strong> {{ conversation.id }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-md-12">
                        <div class="user-message mb-3">
                            <strong>{{ conversation.user_name }}:</strong>
                            <p class="mb-0">{{ conversation.user_message|safe }}</p>
                        </div>
                        <div>
                            <div class="llm-response">
                                <strong>Â·SÃ¬Ä¯SÃ­Â·DbtÂ·:</strong>
                                <p style="white-space: pre-wrap;">{{ conversation.llm_response | safe }}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="created-at mb-3">
                    <strong>{% trans "Created on:" %}</strong> {{ conversation.created_at }}
                </div>
                <div class="row mb-2">
                    <div class="col-md-12 text-center">
                        <div class="text-center">
                            <audio id="response-audio-{{ conversation.id }}" controls class="w-100" 
                            style="max-width: 271px; height: 37px;">
                                <source src="{% url 'serve_audio_from_db' conversation.id %}" type="audio/mp3">
                                {% trans "Your browser does not support the audio element." %}
                            </audio>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 text-center">
                        <div class="like-button" data-conversation-id="{{ conversation.id }}" {% if conversation.liked %}
                            style="color: #ab51f5;" {% else %} style="color: lightcyan;" {% endif %}>
                            <i class="fa fa-heart fa-2x"></i>
                            <hr class="green mb-3" style="margin: 0 45%;">
                    
                            <!-- This div is hidden by default and only shown when the user clicks the like button -->
                            <div id="likeMessage-{{ conversation.id }}" class="text-center" style="display: none;">
                                <!-- The content here will be updated dynamically by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <a href="javascript:history.back();" class="nav-link white">
                    {% trans "Click to Go Back to Select Conversation" %}
                </a>
            </div>
            <hr class="gold mb-5">
            <hr class="crimson mb-3">
        
            <!--  Back to home btn -->
            <div class="center back-home mb-3">
                <a href="{% url 'conversation-interface' %}" class="nav-link grey">-Â¡!Â¡- {% trans "Back Home" %} -Â¡!Â¡-</a>
            </div>
        
            <hr class="crimson mb-5">

        </div>
    </div>
</main>

<script src="{% static 'js/like-unlike-convers.js' %}" defer></script>

{% endblock %}
